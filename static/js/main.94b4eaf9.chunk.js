(this["webpackJsonpredux-app"]=this["webpackJsonpredux-app"]||[]).push([[0],{114:function(e,t){},163:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},168:function(e,t,n){"use strict";n.r(t);var c=n(83),r=n.n(c),a=n(0),s=n.n(a),o=n(1),i=n(7),u=n(4),d=n(11),l=n(8),j=(n(163),n(3));var b=function(e){var t=e.todoList,n=e.setTodoList,c=Object(d.useSession)().session,r=Object(u.useState)(""),a=Object(i.a)(r,2),b=a[0],p=a[1],h=function(){var e=Object(o.a)(s.a.mark((function e(r){var a,o,i,u,d,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(l.getSourceUrl)(t),o=Object(l.addStringNoLocale)(Object(l.createThing)(),"http://schema.org/text",r),i=Object(l.addDatetime)(o,"http://www.w3.org/2002/12/cal/ical#created",new Date),u=Object(l.addUrl)(i,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/2002/12/cal/ical#Vtodo"),d=Object(l.setThing)(t,u),e.next=7,Object(l.saveSolidDatasetAt)(a,d,{fetch:c.fetch});case 7:j=e.sent,n(j);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),h(b),p("");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("form",{className:"todo-form",onSubmit:f,children:[Object(j.jsx)("label",{htmlFor:"todo-input",children:Object(j.jsx)("input",{id:"todo-input",type:"text",value:b,onChange:function(e){e.preventDefault(),p(e.target.value)}})}),Object(j.jsx)("button",{className:"add-button",type:"submit",children:"Add Todo"})]})},p=(n(165),"http://schema.org/text"),h="http://www.w3.org/2002/12/cal/ical#created",f="http://www.w3.org/2002/12/cal/ical#completed";function O(e){var t=e.checked,n=e.handleCheck,c=Object(d.useThing)().thing;return Object(j.jsx)("label",{children:Object(j.jsx)("input",{type:"checkbox",checked:t,onChange:function(){return n(c,t)}})})}function g(e){var t=e.deleteTodo,n=Object(d.useThing)().thing;return Object(j.jsx)("button",{className:"delete-button",onClick:function(){return t(n)},children:"Delete"})}var x=function(e){var t=e.todoList,n=e.setTodoList,c=t?Object(l.getThingAll)(t):[];c.sort((function(e,t){return Object(l.getDatetime)(e,h)-Object(l.getDatetime)(t,h)}));var r=Object(d.useSession)().fetch,a=function(){var e=Object(o.a)(s.a.mark((function e(c){var a,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(l.getSourceUrl)(t),o=Object(l.removeThing)(t,c),e.next=4,Object(l.saveSolidDatasetAt)(a,o,{fetch:r});case 4:i=e.sent,n(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(s.a.mark((function e(c,a){var o,i,u,d,j,b,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(l.getSourceUrl)(t),a?(j=Object(l.getDatetime)(c,f),b=Object(l.removeDatetime)(c,f,j),i=Object(l.setThing)(t,b,{fetch:r})):(u=new Date,d=Object(l.addDatetime)(c,f,u),i=Object(l.setThing)(t,d,{fetch:r})),e.next=4,Object(l.saveSolidDatasetAt)(o,i,{fetch:r});case 4:p=e.sent,n(p);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=c.filter((function(e){return"http://www.w3.org/2002/12/cal/ical#Vtodo"===Object(l.getUrl)(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type")})).map((function(e){return{dataset:t,thing:e}}));return u.length?Object(j.jsxs)("div",{className:"table-container",children:[Object(j.jsxs)("span",{className:"tasks-message",children:["Your to-do list has ",u.length," items"]}),Object(j.jsxs)(d.Table,{className:"table",things:u,children:[Object(j.jsx)(d.TableColumn,{property:p,header:"To Do",sortable:!0}),Object(j.jsx)(d.TableColumn,{property:h,dataType:"datetime",header:"Created At",body:function(e){return e.value.toDateString()},sortable:!0}),Object(j.jsx)(d.TableColumn,{property:f,dataType:"datetime",header:"Done",body:function(e){var t=e.value;return Object(j.jsx)(O,{checked:Boolean(t),handleCheck:i})}}),Object(j.jsx)(d.TableColumn,{property:p,header:"",body:function(){return Object(j.jsx)(g,{deleteTodo:a})}})]})]}):null};function w(e,t){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(s.a.mark((function e(t,n){var c,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(t,"index.ttl"),e.prev=1,e.next=4,Object(l.getSolidDataset)(c,{fetch:n});case 4:return r=e.sent,e.abrupt("return",r);case 8:if(e.prev=8,e.t0=e.catch(1),404!==e.t0.statusCode){e.next=15;break}return e.next=13,Object(l.saveSolidDatasetAt)(c,Object(l.createSolidDataset)(),{fetch:n});case 13:return a=e.sent,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}n(166);var m={clientName:"Solid Todo App"};var T=function(){var e=Object(d.useSession)().session,t=Object(u.useState)(),n=Object(i.a)(t,2),c=n[0],r=n[1],a=Object(u.useState)(""),p=Object(i.a)(a,2),h=p[0],f=p[1];return Object(u.useEffect)((function(){e&&e.info.isLoggedIn&&Object(o.a)(s.a.mark((function t(){var n,c,a,o,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.getSolidDataset)(e.info.webId,{fetch:e.fetch});case 2:return n=t.sent,c=Object(l.getThing)(n,e.info.webId),a=Object(l.getUrlAll)(c,"http://www.w3.org/ns/pim/space#storage"),o=a[0],i="".concat(o,"todos/"),t.next=9,w(i,e.fetch);case 9:u=t.sent,r(u);case 11:case"end":return t.stop()}}),t)})))()}),[e,e.info.isLoggedIn]),Object(j.jsx)("div",{className:"app-container",children:e.info.isLoggedIn?Object(j.jsxs)(d.CombinedDataProvider,{datasetUrl:e.info.webId,thingUrl:e.info.webId,children:[Object(j.jsxs)("div",{className:"message logged-in",children:[Object(j.jsx)("span",{children:"You are logged in as: "}),Object(j.jsx)(d.Text,{properties:["http://xmlns.com/foaf/0.1/name","http://www.w3.org/2006/vcard/ns#fn"]}),Object(j.jsx)(d.LogoutButton,{})]}),Object(j.jsxs)("section",{children:[Object(j.jsx)(b,{todoList:c,setTodoList:r}),Object(j.jsx)(x,{todoList:c,setTodoList:r})]})]}):Object(j.jsxs)("div",{className:"message",children:[Object(j.jsx)("span",{children:"You are not logged in. "}),Object(j.jsxs)("span",{children:["Log in with:",Object(j.jsx)("input",{className:"oidc-issuer-input ",type:"text",name:"oidcIssuer",list:"providers",value:h,onChange:function(e){f(e.target.value)}}),Object(j.jsxs)("datalist",{id:"providers",children:[Object(j.jsx)("option",{value:"https://broker.pod.inrupt.com/"}),Object(j.jsx)("option",{value:"https://inrupt.net/"})]})]}),Object(j.jsx)(d.LoginButton,{oidcIssuer:h,redirectUrl:window.location.href,authOptions:m})]})})};r.a.render(Object(j.jsx)(d.SessionProvider,{children:Object(j.jsx)(T,{})}),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.94b4eaf9.chunk.js.map